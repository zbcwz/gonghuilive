!function(e){function t(t){for(var s,r,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,o=1;o<i.length;o++){var l=i[o];0!==n[l]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},n={app:0},a=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()}({0:function(e,t,i){e.exports=i("56d7")},"0078":function(e,t){e.exports=labor},"034f":function(e,t,i){"use strict";var s=i("6f44");i.n(s).a},"23e0":function(e,t,i){"use strict";(function(e,s,n){i("3a20"),i("b3f9"),i("d780"),i("3e5e"),i("419a");var a=i("e980"),r=i("7a2a"),o=i.n(r);t.a={name:"app",data:function(){return{wxurl:"/app/index.php?i="+this.pageconfig.uniacid+"&c=auth&a=actforward&forward=",inspect:!1,statistic:o.a,wxEnvironment:!1,loadedQlgh:!1,locationing:!1}},computed:{},created:function(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.$commonfunc.common.isWeiXin()&&(this.wxEnvironment=!0),this.systemInit(),this.shareInit()},watch:{$route:function(){}},mounted:function(){},methods:{systemInit:function(){var e=this;return Object(a.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.wxRefStatus();case 2:if(e.wxEnvironment&&e.$store.state.weixinPage||!e.wxEnvironment)return t.next=6,e.$store.dispatch("getQighUser");t.next=16;break;case 6:return t.next=9,e.$commonfunc.qlgh.verifyuserinfo(e.$store.state.qlghUser);case 9:(i=t.sent).status||""==i.content||(e.userErrMsg=i.content),(!e.wxEnvironment&&!e.$store.state.qlghUser.error||e.wxEnvironment&&e.$store.state.qlghUser.error)&&i.status&&!i.content||e.$store.commit("updateErrEnv"),e.loadedQlgh=!0,e.$toast.clear();case 16:case"end":return t.stop()}}),t)})))()},wxRefStatus:function(){var e=this;return new Promise((function(t,i){var s=e.$commonfunc.config.zb.wxurl,n=e.$store.state.weixinPage,a=e.$route.query.wxref;e.wxEnvironment&&a&&(e.$store.commit("setWeixinPage"),n=!0),e.wxEnvironment&&!n&&window.location.replace(s+encodeURIComponent(window.location.href)),t(!0)}))},shareInit:function(){var t=this,i=location.href.split("#")[0];e.ajax({url:"/mapi/shareConfig.php",type:"get",async:!1,data:{url:i},dataType:"json",success:function(e){s.config({debug:!1,appId:t.pageconfig.appid,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ"]}),n.shareReady()},error:function(){}})}}}}).call(this,i("debc"),i("00ca"),i("484e"))},"254e":function(e,t,i){"use strict";var s=i("5a49");i.n(s).a},"2cd1":function(e,t,i){},"2f18":function(e,t,i){"use strict";var s=i("2cd1");i.n(s).a},"2f2c":function(e,t,i){},"3dfd":function(e,t,i){"use strict";var s=i("23e0").a,n=(i("034f"),i("623f")),a=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[!1!==e.$route.meta.headershow?i("header",{staticClass:"mint-header is-fixed",staticStyle:{display:"none",background:"rgb(253, 123, 39)",height:"46px","z-index":"99999"}}):e._e(),e.wxEnvironment&&e.$store.state.weixinPage&&e.loadedQlgh||!e.wxEnvironment&&e.loadedQlgh?i("router-view"):e._e()],1)}),[],!1,null,null,null);t.a=a.exports},"440a":function(e,t,i){"use strict";i("3a20"),i("b3f9"),i("ec4a"),i("419a");var s,n=i("e980"),a=i("0078"),r=i.n(a);t.a={config:{zb:{uniacid:3,websiteurl:"http://rzweixin.zb12351.com/",wsurl:"ws://118.190.135.227:8083",sharetitle:"爱工惠直播",sharedesc:"爱工惠直播",shareimgUrl:"http://www.zb12351.com/icon.png",attachurl:"http://newweixin.oss-cn-qingdao.aliyuncs.com/",appid:"wx66bac84390587c8c",wxurl:"/app/index.php?i=3&c=auth&a=actforward&forward=",preventInfo:"请到齐鲁工惠APP或日照职工e家微信公众号参与活动"}},qlgh:{dislocation:3703,initQlgh:(s=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t,i){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.a.getUserInfo((function(e){s=e,r.a.getLaborStatus((function(e){s.laborStatus=e.laborStatus,t(s)}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)}),verifyuserinfo:function(e){return this.isWeiXin()?{status:!0}:e.error?{content:"请到齐鲁工惠APP或日照职工e家微信公众号参与活动",status:!1}:-1==e.userId?(r.a.openLogin(),{content:"",status:!1}):(e.districtCode.substr(0,4),this.dislocation,e.laborStatus<=0||e.laborStatus,{content:"",status:!0})},isWeiXin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},common:{isWeiXin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}}}},"484e":function(e,t,i){var s=i("00ca"),n={shareReady:function(){var e={title:"爱工惠直播",desc:"爱工惠直播系统",link:"",imgUrl:"http://www.zb12351.com/icon.png",success:function(){},cancel:function(){}};s.ready((function(){s.onMenuShareAppMessage(e),s.onMenuShareTimeline(e),s.onMenuShareQQ(e)}))},shareDetail:function(e){e&&s.ready((function(){s.onMenuShareAppMessage(e),s.onMenuShareTimeline(e),s.onMenuShareQQ(e)}))}};e.exports=n},"56d7":function(e,t,i){"use strict";i.r(t),function(e,t){i("f78b");var s=i("7a238"),n=(i("2bda"),i("81e8")),a=(i("474e"),i("cf91")),r=(i("49ce"),i("d946")),o=(i("d175"),i("e4ab")),l=(i("7a89"),i("dc17")),c=(i("0883"),i("d194")),u=(i("be10"),i("4e99")),d=(i("5dd0"),i("1377")),m=(i("f8f6"),i("8ae6")),p=(i("f930"),i("f534")),f=(i("8073"),i("1630")),h=(i("3daf"),i("d126")),v=(i("6cf3"),i("2ae2")),g=(i("efd7"),i("1814")),w=(i("3cfa"),i("f8b6")),y=(i("7a70"),i("357e")),x=(i("9a14"),i("9fd5")),b=(i("7bbe"),i("9147")),L=(i("d9a3"),i("c9db"),i("de3e"),i("618d"),i("9f45"),i("eaa7"),i("a593")),_=i("3dfd"),k=i("1bee"),C=i("8876"),$=i("653a"),S=i("c437"),O=i("440a");i("484e"),i("debc"),L.a.use(C.a),L.a.use(k.a),L.a.use(s.a).use(n.a).use(a.a).use(r.a).use(o.a).use(l.a).use(c.a).use(u.a).use(d.a).use(m.a).use(p.a).use(f.a).use(h.a).use(v.a).use(g.a).use(w.a).use(y.a).use(x.a).use(b.a),L.a.prototype.$commonfunc=O.a,L.a.prototype.pageconfig={uniacid:3,wsurl:"ws://118.190.135.227:8083",sharetitle:"爱工惠直播",sharedesc:"爱工惠直播",shareimgUrl:"http://www.zb12351.com/icon.png",attachurl:"http://newweixin.oss-cn-qingdao.aliyuncs.com/",appid:"wx66bac84390587c8c",wxurl:"/app/index.php?i=3&c=auth&a=actforward&forward="},L.a.prototype.$toast=d.a,L.a.prototype.$notify=w.a,"rzlive"==Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_BUILD_TYPE&&(L.a.prototype.pageconfig={uniacid:7,wsurl:"ws://119.3.220.251:8083",sharetitle:"日照职工e家直播",sharedesc:"日照职工e家直播",shareimgUrl:"http://www.zb12351.com/icon.png",attachurl:"http://rzweixinobs.zb12351.com/attachment/",appid:"wx402361ad6ccc734e"});var M=new C.a.Store($.a),T=new k.a({base:t,routes:S.a});new L.a({store:M,router:T,render:function(e){return e(_.a)}}).$mount("#app"),T.beforeEach((function(e,t,i){t.meta.scrollY=window.scrollY,Object.assign(e.meta,e.params,e.query),i()})),T.afterEach((function(e){e.meta.scrollY?setTimeout((function(){window.scrollTo(0,e.meta.scrollY)}),0):window.scrollTo(0,0)}))}.call(this,i("eef6"),"/")},"5a49":function(e,t,i){},"5a4f":function(e,t,i){"use strict";var s=i("c5a4");i.n(s).a},"5e03":function(e,t,i){"use strict";(function(e){var s=i("8321"),n=i("484e"),a=i.n(n);t.a={name:"homepage",data:function(){return{selected:"0",keywords:"",listValue:[],classList:{0:{id:0,page:1,loadingMoreStatus:!1,finished:!1,error:!1}},offLine:!1,bannerList:[],moduleListL:[],carousel:"",recommend:{first:{name:"",list:[]},second:{name:"",list:[]},third:{name:"",list:[]},fouth:{name:"",list:[]}},goodsList:[]}},created:function(){this.listPageInit();var e={title:this.pageconfig.sharetitle,desc:this.pageconfig.sharedesc,link:"",imgUrl:this.pageconfig.shareimgUrl,success:function(){},cancel:function(){}};a.a.shareDetail(e)},mounted:function(){},components:{LiveList:s.a},watch:{},methods:{listPageInit:function(){var t=this;e.ajax({url:"/app/index.php?i="+this.pageconfig.uniacid+"&c=entry&m=ewei_shopv2&do=mobile&r=live.list.get_list_info",type:"GET",data:{page:1,cate:0,keywords:t.keywords},dataType:"json",success:function(e){for(var i=0;i<e.result.category.length;i++)e.result.category[i].finished=!1,e.result.category[i].loadingMoreStatus=!1,e.result.category[i].error=!1,e.result.category[i].page=1,t.$set(t.classList,e.result.category[i].id,e.result.category[i]);t.bannerList=e.result.banner},error:function(){}})},getLiveList:function(){var t=this;e.ajax({url:"/app/index.php?i="+this.pageconfig.uniacid+"&c=entry&m=ewei_shopv2&do=mobile&r=live.list.get_list",type:"GET",data:{page:1,cate:0,keywords:t.keywords},dataType:"json",success:function(e){if(1==e.status){t.listValue[0]||t.listValue.push([]);for(var i=0;i<e.result.list.length;i++)t.listValue[0].push(e.result.list[i])}}})},loadMore:function(){var t=this;t.classList[t.selected].loadingMoreStatus=!0,e.ajax({url:"/app/index.php?i="+this.pageconfig.uniacid+"&c=entry&m=ewei_shopv2&do=mobile&r=live.list.get_list_info",type:"GET",data:{page:t.classList[t.selected].page,cate:t.selected,keywords:t.keywords},dataType:"json",success:function(e){if(t.classList[t.selected].loadingMoreStatus=!1,t.classList[t.selected].page++,e.result.total<=0&&(t.classList[t.selected].finished=!0),1==e.status){t.listValue[t.selected]||t.listValue.push([]);for(var i=0;i<e.result.list.length;i++)t.listValue[t.selected].push(e.result.list[i])}},error:function(){t.classList[t.selected].error=!0}})},loadMoree:function(){alert("aaa");var t=this;this.classList[t.selected].loadingMoreStatus=!0,e.ajax({url:"/app/index.php?i="+this.pageconfig.uniacid+"&c=entry&m=ewei_shopv2&do=mobile&r=live.list.get_list",type:"GET",data:{page:1,cate:t.selected},dataType:"json",success:function(e){if(t.classList[t.selected].loadingMoreStatus=!1,1==e.status){t.listValue[t.selected]||t.listValue.push([]);for(var i=0;i<e.result.list.length;i++)t.listValue[t.selected].push(e.result.list[i])}}})},tolink:function(e){window.location.href=e},onSearch:function(){var t=this;t.classList[t.selected].loadingMoreStatus=!0,e.ajax({url:"/app/index.php?i="+this.pageconfig.uniacid+"&c=entry&m=ewei_shopv2&do=mobile&r=live.list.get_list_info",type:"GET",data:{page:1,cate:t.selected,keywords:t.keywords},dataType:"json",success:function(e){if(t.classList[t.selected].loadingMoreStatus=!1,e.result.total<=0&&(t.classList[t.selected].finished=!0),t.classList[t.selected].page++,1==e.status){t.listValue[t.selected]=[],t.listValue[t.selected]||t.listValue.push([]);for(var i=0;i<e.result.list.length;i++)t.listValue[t.selected].push(e.result.list[i])}},error:function(){t.classList[t.selected].error=!0}})}}}}).call(this,i("debc"))},"653a":function(e,t,i){"use strict";i("3a20"),i("419a");var s=i("e980"),n=(i("440a"),{popupVisible:!1,shareDetail:{href:"",title:"淄矿工惠",content:"我正在使用淄矿工惠APP，赶紧跟我一起来体验！",thumbs:["http://pic51.nipic.com/file/20141022/19779658_171157758000_2.jpg"],pictures:["http://pic51.nipic.com/file/20141022/19779658_171157758000_2.jpg"],contentType:0,detailId:0},shares:"",huodongActionOnce:!1,weixinPage:!1,qlghUser:null,noEntry:!1,errEnv:!0}),a={updatePopupVisible:function(e,t){e.popupVisible=t},updateShareDetail:function(e,t){e.shareDetail=t},updateShares:function(e,t){e.shares=t},updatehuodongActionOnce:function(e){e.huodongActionOnce=!0},updateErrEnv:function(e){e.errEnv=!1},setWeixinPage:function(e){e.weixinPage=!0}},r={getQighUser:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(i,s){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e,n.qlghUser){t.next=7;break}return t.next=5,a._vm.$commonfunc.qlgh.initQlgh();case 5:n.qlghUser=t.sent;case 7:i(!0);case 9:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()}};t.a={state:n,mutations:a,actions:r}},"6f44":function(e,t,i){},7715:function(e,t,i){"use strict";(function(e,s){i("4045"),i("e90c"),i("c354"),i("3c4a"),i("3a20"),i("b3f9"),i("7267"),i("ec4a"),i("d780"),i("3e5e"),i("b5d8");var n,a=i("3592"),r=(i("419a"),i("e980")),o=(i("b518"),i("0078"),i("8b37")),l=i.n(o),c=i("cf77");t.a={name:"LiveRoom",data:function(){return{wxurl:"/app/index.php?i="+this.pageconfig.uniacid+"&c=auth&a=actforward&forward=",pageInited:!1,tabheight:"300px",tablock:!1,wsClient:null,wsloading:!1,message:{textLiveList:{},commentList:{}},modal:{hearbeatTimeout:null,hearbeatTimeoutClose:null,wsConnected:!1,qlghuser:{},wsBanned:{self:"",all:0},wsConfig:{attachurl:this.pageconfig.attachurl,uid:null,nickname:null}},live:{status:-1,showOnline:0,showOnlineNum:!1,cover:"",realOnline:0,liveTime:0,liveTitle:"",showtextlivetab:!1,introduce:"",menu:{},playbackurl:"",reviewtype:0,emoji:[]},roomClassifyList:[{id:1,name:"直播评论",type:0},{id:2,name:"直播介绍",type:0}],aselected:"1",aliplayerheight:"100%",skinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"liveDisplay",align:"tlabs",x:15,y:6},{name:"fullScreenButton",align:"tr",x:10,y:10},{name:"volume",align:"tr",x:5,y:10}]}],dianskinLayout:[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:7},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}],resizetimer:null,tbl:[],aliplayerOptions:{source:"",autoplay:!0,useH5Prism:!0,playsinline:!0,controlBarVisibility:"hover",isLive:!0,cover:"",height:"100%"}}},components:{"ali-player":l.a.Player,LiveRoomBottom:c.a},created:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$toast.loading({duration:0,forbidClick:!0,message:"加载直播间..."}),e.initQlgh(),t.next=4,e.initRoomInfo();case 4:e.pageInited=!0,e.tablock=!0,e.connectWs(),e.$nextTick((function(){void 0!==e.$refs.commentListt&&(e.$refs.commentListt[0].scrollTop=e.$refs.commentListt[0].scrollHeight),void 0!==e.$refs.textLiveListt&&(e.$refs.textLiveListt[0].scrollTop=e.$refs.textLiveListt[0].scrollHeight)}));case 8:case"end":return t.stop()}}),t)})))()},mounted:function(){},computed:{initOnline:function(){var e=parseInt(this.live.realOnline)+parseInt(this.live.showOnline);return e<=0?(this.live.showOnlineNum=!1,0):(this.live.showOnlineNum=!0,1e4<e&&(e=(e/1e4).toFixed(2),e+="万"),e)},liveStartTime:function(){var e=new Date(1e3*this.live.liveTime),t=e.getFullYear()+"-"+this.pad(e.getMonth()+1,2)+"-"+this.pad(e.getDate(),2)+" "+this.pad(e.getHours(),2)+":"+this.pad(e.getMinutes(),2);return t},liveTimeStatus:function(){return(new Date).getTime()/1e3>=this.live.liveTime},c_pageInited:function(){return this.pageInited}},watch:{},methods:{pad:function(e,t){var i=t-e.toString().length;return i<=0?e:(this.tbl[i]||(this.tbl[i]=new Array(1+i).join("0")),this.tbl[i]+e)},toLink:function(e){if(!e)return!1;window.location=e},initRoomInfo:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this,t.abrupt("return",new Promise((function(t,n){var a=i.$route.params.id,r=window.location.href.split("?wxref")[0];a||t(!1),e.ajax({url:"/app/index.php?i="+i.pageconfig.uniacid+"&c=entry&m=ewei_shopv2&do=mobile&r=live.room.getRoomInfo",type:"GET",async:!1,data:{id:a},dataType:"json",success:function(e){i.$toast.clear(),i.live.liveTime=e.result.list.room.livetime,i.live.liveTitle=e.result.list.room.title,i.live.introduce=e.result.list.room.introduce,i.aliplayerOptions.source=e.result.list.room.video,i.aliplayerOptions.cover=i.live.cover=""!=e.result.list.room.cover?e.result.list.room.cover:e.result.list.room.thumb,i.live.playbackurl=e.result.list.room.playbackurl,i.live.reviewtype=e.result.list.room.reviewtype,i.live.emoji=e.result.list.emoji,i.live.status=e.result.list.room.living,i.modal.wsConfig.uid=e.result.list.roomwxuser.uid,i.modal.wsConfig.nickname=e.result.list.roomwxuser.nickname;var n={title:0<e.result.list.room.title.length?e.result.list.room.title:i.pageconfig.sharetitle,desc:0<e.result.list.room.share_desc.length?e.result.list.room.share_desc:i.pageconfig.sharedesc,link:r,imgUrl:0<e.result.list.room.share_icon.length?e.result.list.room.share_icon:i.pageconfig.shareimgUrl,success:function(){},cancel:function(){}};s.shareDetail(n);for(var a=0;a<e.result.list.records.length;a++)2!=e.result.list.records[a].status&&i.$set(i.message.commentList,e.result.list.records[a].id,e.result.list.records[a]);for(var o=0;o<e.result.list.textliverecords.length;o++)2!=e.result.list.textliverecords[o].status&&i.$set(i.message.textLiveList,e.result.list.textliverecords[o].id,e.result.list.textliverecords[o]);for(var l=0;l<e.result.list.nestables.length;l++)i.live.menu.interaction=e.result.list.menu.interaction.name,i.live.menu.goods=e.result.list.menu.goods.name,i.live.menu.introduce=e.result.list.menu.introduce.name,0!=e.result.list.menu[e.result.list.nestables[l]].isshow&&"interaction"!=e.result.list.nestables[l]&&"goods"!=e.result.list.nestables[l]&&"introduce"!=e.result.list.nestables[l]&&(e.result.list.menu[e.result.list.nestables[l]].id=e.result.list.nestables[l],i.roomClassifyList.push(e.result.list.menu[e.result.list.nestables[l]]));t(!0)},error:function(){t(!1)}})})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),connectWs:function(){var e=this;this.wsloading=!0,this.wsClient=new WebSocket(this.pageconfig.wsurl),this.wsClient.onopen=function(){e.wsSend("login",{toUser:"system"}),e.wsMessage(),e.initheartbeat(),window.onbeforeunload=function(){e.wsClient.close()}},this.wsClient.onclose=function(){e.modal.wsConnected=!1,e.wsloading=!1,e.$toast("连接断开")}},initheartbeat:function(){var e=this;clearTimeout(this.hearbeatTimeout),this.hearbeatTimeout=setTimeout((function(){e.wsSend("ping",{toUser:"system"}),e.initheartbeat()}),6e3)},wsSend:function(t,i){if(!t||e.isEmptyObject(i))return!1;if("login"!=t&&"ping"!=t){if(!this.modal.wsConnected)return this.$toast("连接失败"),!1;if("redpackget"!=t&&"redpackdraw"!=t&&"coupondraw"!=t&&"communication"!=t&&"ping"!=t){if(1==this.modal.wsBanned.all)return this.$toast("管理员禁止任何人发言"),!1;if(""!=this.modal.wsBanned.self)return this.$toast("你被管理员禁止发言"),!1}}var s=this.modal.wsConfig;return i.type=t,i.scene="live",i.roomid=this.$route.params.id,i.uniacid=this.$route.params.uniacid,i.isqlgh=0,!i.uid&&this.modal.qlghuser.userPhone?(i.uid=this.modal.qlghuser.userPhone,i.nickname=this.modal.qlghuser.userName,i.isqlgh=1):(i.uid=s.uid,i.nickname=s.nickname),this.wsClient.send(JSON.stringify(i)),!0},wsMessage:function(){var e=this;this.wsClient.onmessage=function(t){var i=JSON.parse(t.data);if("connected"==i.type)e.$toast("连接成功"),e.modal.wsConnected=!0,e.modal.wsBanned=i.banned,1==i.banned.all?(i.text="管理员禁止任何人发言",e.liveMsg("notice",i)):""!=i.banned.self&&(i.text="你被管理员禁止发言",e.liveMsg("notice",i)),e.live.status=i.settings.status,e.live.showOnline=i.settings.virtual||0,e.live.realOnline=i.online||0,1==i.settings.showtlive&&0!=e.roomClassifyList[0].id&&(e.roomClassifyList.unshift({id:0,name:"图文直播",type:0}),e.aselected=0);else if("notice"==i.type)e.liveMsg("notice",i);else if("ping"==i.type)e.initheartbeat();else if("setting"==i.type){var s=i.settings;if(!s)return;e.live.status!=s.status&&(e.live.status=s.status),e.live.showOnline!=s.virtual&&(e.live.showOnline=s.virtual),1==s.showtlive&&0!=e.roomClassifyList[0].id?(e.roomClassifyList.unshift({id:0,name:"图文直播",type:0}),e.aselected=0):0==s.showtlive&&0==e.roomClassifyList[0].id&&e.$delete(e.roomClassifyList,0),s.nickname_old&&(i.text='管理员"'+s.nickname_old+'"更名为"'+s.nickname+'"',e.liveMsg("notice",i))}else"userEnter"==i.type?e.live.realOnline++:"userLeave"==i.type?e.live.realOnline--:"text"==i.type||"sent"==i.type?e.liveMsg("text",i):"image"==i.type?e.liveMsg("image",i):"repeal"==i.type||"delete"==i.type?i.msgid&&(i.text=i.nickname+"撤回了一条消息",e.liveMsg("repeal",i)):"tdelete"==i.type?i.msgid&&e.textliveMsg("repeal",i):"banned"==i.type?(1==i.banned?(e.modal.wsBanned.self=!0,i.text="你被管理员禁止发言"):(e.modal.wsBanned.all,e.modal.wsBanned.self=!1,i.text="你被管理员允许发言"),e.liveMsg("notice",i)):"bannedAll"==i.type?(1==i.banned?(e.modal.wsBanned.all=!0,i.text="管理员禁止任何人发言"):(e.modal.wsBanned.self,e.modal.wsBanned.all=!1,i.text="管理员解除全体禁言"),e.liveMsg("notice",i)):"clicklike"==i.type||("textlive"==i.type?e.textliveMsg("text",i):"timage"==i.type&&e.textliveMsg("image",i))}},liveMsg:function(t,i){var s=this,n=this;if("image"==t)i.text=this.tomedia(i.text);else if("text"==t&&i.text){if(-1<i.text.indexOf("[")&&-1<i.text.indexOf("]")){var a=i.text.match(/\[([^\]]+)\]/g);a&&e.each(a,(function(e,t){var s=t.replace("[","");s=s.replace("]","");var a=n.live.emoji.indexOf(s);if(0<a){var r='<img class="face" src="/addons/ewei_shopv2/plugin/live/static/images/face/'+a+'.gif?v=2" />';i.text=i.text.replace(t,r)}}))}}else"notice"==t?i.type="notice":"repeal"==t&&(i.type="repeal");"repeal"==t?this.$delete(this.message.commentList,i.msgid):this.$set(this.message.commentList,i.msgid,i),this.$nextTick((function(){void 0!==s.$refs.commentListt&&(s.$refs.commentListt[0].scrollTop=s.$refs.commentListt[0].scrollHeight)}))},textliveMsg:function(t,i){var s=this,n=this;if("image"==t)i.text=this.tomedia(i.text);else if("text"==t&&i.text){if(-1<i.text.indexOf("[")&&-1<i.text.indexOf("]")){var a=i.text.match(/\[([^\]]+)\]/g);a&&e.each(a,(function(e,t){var s=t.replace("[","");s=s.replace("]","");var a=n.live.emoji.indexOf(s);if(0<a){var r='<img class="face" src="/addons/ewei_shopv2/plugin/live/static/images/face/'+a+'.gif?v=2" />';i.text=i.text.replace(t,r)}}))}}else"notice"==t?i.type="notice":"repeal"==t&&(i.type="repeal");"repeal"==t?this.$delete(this.message.textLiveList,i.msgid):this.$set(this.message.textLiveList,i.msgid,i),this.$nextTick((function(){void 0!==s.$refs.textLiveListt&&(s.$refs.textLiveListt[0].scrollTop=s.$refs.textLiveListt[0].scrollHeight)}))},tomedia:function(e){return"string"!=typeof e?"":0==e.indexOf("http://")||0==e.indexOf("https://")||0==e.indexOf("../addons/ewei_shopv2/")?e:0==e.indexOf("images/")||0==e.indexOf("audios/")?this.modal.wsConfig.attachurl+e:void 0},handleImgsClick:function(e){Object(a.a)({images:[e],closeOnPopstate:!0,showIndex:!1,onClose:function(){}})},initQlgh:function(){this.modal.qlghuser=this.$store.state.qlghUser,this.modal.qlghuser.error&&(this.modal.qlghuser={})},viewPlayBack:function(){0!=this.live.reviewtype?(this.aliplayerOptions.isLive=!1,this.aliplayerOptions.skinLayout=this.dianskinLayout,this.aliplayerOptions.source=this.live.playbackurl,this.live.status=1):window.location.href=this.live.playbackurl},isWeiXin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},commentImgLoaded:function(){}},beforeRouteLeave:function(e,t,i){this.$refs.VueAliplayerV2&&(this.aliplayerOptions.source=""),this.$toast.clear(),i()}}}).call(this,i("debc"),i("484e"))},"7a2a":function(e,t){},"7df3":function(e,t,i){"use strict";var s=i("2f2c");i.n(s).a},8321:function(e,t,i){"use strict";var s={props:["listvalues","title"],name:"LiveList",data:function(){return{}},created:function(){},mounted:function(){},methods:{liveTimeStatus:function(){return(new Date).getTime()/1e3>=this.listvalues.livetimestarp}},computed:{getLiveStatus:function(){var e=this.liveTimeStatus();return this.listvalues.living<=0&&!e?"未开始":1<=this.listvalues.living?"直播中":this.listvalues.living<=0&&e?"结束":void 0}}},n=(i("5a4f"),i("623f")),a=Object(n.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return 3!=e.listvalues.livetype?i("router-link",{attrs:{to:{name:"liveroom",params:{id:e.listvalues.id,uniacid:3}}}},[i("div",{staticClass:"livelist-children"},[i("van-tag",{staticClass:"livelist-status"},[e._v(e._s(e.getLiveStatus))]),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.listvalues.thumb,expression:"listvalues.thumb"}],staticClass:"livelist-img",attrs:{alt:""}}),i("p",{staticClass:"livelist-tit"},[e._v(e._s(e.listvalues.title))]),i("span",{staticClass:"livelist-starttime"},[e._v(e._s(e.listvalues.livetime)+" 开播")])],1)]):3==e.listvalues.livetype?i("a",{attrs:{href:e.listvalues.video}},[i("div",{staticClass:"livelist-children"},[i("van-tag",{staticClass:"livelist-status"},[e._v(e._s(e.getLiveStatus))]),i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.listvalues.thumb,expression:"listvalues.thumb"}],staticClass:"livelist-img",attrs:{alt:""}}),i("p",{staticClass:"livelist-tit"},[e._v(e._s(e.listvalues.title))]),i("span",{staticClass:"livelist-starttime"},[e._v(e._s(e.listvalues.livetime)+" 开播")])],1)]):e._e()}),[],!1,null,null,null);t.a=a.exports},"9d3a":function(e,t,i){"use strict";var s=i("dbdd");i.n(s).a},b518:function(e,t,i){i("6266"),e.exports={ws:{address:"ws://weixin.zb12351.com:9501"},ajax:{url:""}}},c437:function(e,t,i){"use strict";var s={name:"home",data:function(){return{}},watch:{},created:function(){},methods:{}},n=(i("7df3"),i("623f")),a=Object(n.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"appp"}},[t("keep-alive",{attrs:{include:"homepage"}},[t("router-view")],1)],1)}),[],!1,null,null,null).exports,r=i("5e03").a,o=(i("254e"),Object(n.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"homepage"},[0<e.bannerList.length?i("van-swipe",{staticStyle:{height:"4.88rem"},attrs:{autoplay:3e3,"indicator-color":"white"}},e._l(e.bannerList,(function(e,t){return i("van-swipe-item",{key:e.id},[i("a",{attrs:{href:e.link}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumb,expression:"banner.thumb"}],staticClass:"swipe-img"})])])})),1):e._e(),i("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:e.onSearch},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),i("van-tabs",{attrs:{sticky:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[i("van-tab",{attrs:{title:"全部",name:"0"}},[i("van-list",{attrs:{finished:e.classList[0].finished,error:e.classList[0].error,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){return e.$set(e.classList[0],"error",t)},load:e.loadMore},model:{value:e.classList[0].loadingMoreStatus,callback:function(t){e.$set(e.classList[0],"loadingMoreStatus",t)},expression:"classList[0].loadingMoreStatus"}},e._l(e.listValue[0],(function(e,t){return i("LiveList",{key:t,attrs:{listvalues:e,title:"aa"}})})),1)],1),e._l(e.classList,(function(t,s){return t&&0!=t.id?i("van-tab",{key:s,attrs:{title:t.name,name:t.id}},[i("van-list",{attrs:{finished:e.classList[t.id].finished,error:e.classList[t.id].error,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载"},on:{"update:error":function(i){return e.$set(e.classList[t.id],"error",i)},load:e.loadMore},model:{value:e.classList[t.id].loadingMoreStatus,callback:function(i){e.$set(e.classList[t.id],"loadingMoreStatus",i)},expression:"classList[classvalue.id].loadingMoreStatus"}},e._l(e.listValue[t.id],(function(e,t){return i("LiveList",{key:t,attrs:{listvalues:e,title:"aa"}})})),1)],1):e._e()}))],2),1==e.offLine||"true"==e.offLine?i("div",{attrs:{id:"miss"}},[e._m(0),i("div",{staticClass:"missText retry",nativeOn:{click:function(t){return e.retry()}}},[i("h3",[e._v("请检查网络")])])]):e._e()],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"missText"},[t("h3",[this._v("呀，页面出错啦！")])])}],!1,null,null,null).exports),l=i("7715").a,c=(i("2f18"),[{path:"/",component:a,meta:{requiresAuth:!0,title:"首页"},children:[{path:"/",component:o,name:"homepage",meta:{title:"首页",backShow:!1}},{path:"/LiveRoom/:uniacid/:id",name:"liveroom",component:Object(n.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.c_pageInited,expression:"c_pageInited"}],staticClass:"liveRoom"},[i("div",{ref:"videoBoxref",attrs:{id:"videoBox"}},[i("keep-alive",[1==e.live.status&&""!=e.aliplayerOptions.source?e._m(0):i("van-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.live.cover},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}])})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1!=e.live.status,expression:"live.status != 1 "}],staticClass:"liveStatus"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0<=e.live.status,expression:"live.status >= 0"}],staticClass:"live-status-sur"},[e.live.status<=0&&!e.liveTimeStatus?i("p",[e._v("直播未开始")]):e.live.status<=0&&e.liveTimeStatus?i("p",[e._v("直播已结束")]):2<=e.live.status?i("p",[e._v("直播已暂停")]):e._e(),i("p",{directives:[{name:"show",rawName:"v-show",value:2!=e.live.status,expression:"live.status != 2"}],staticClass:"liveStatus-time"},[e.liveTimeStatus?i("span",[i("a",{directives:[{name:"show",rawName:"v-show",value:""!=e.live.playbackurl,expression:"live.playbackurl != ''"}],staticClass:"playback",on:{click:e.viewPlayBack}},[e._v("观看直播回顾")])]):i("span",[e._v("预计开播时间："+e._s(e.liveStartTime))])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.live.showOnlineNum,expression:"live.showOnlineNum"}],staticClass:"onlineNum"},[e._v(e._s(e.initOnline)+"人观看")]),i("div",{staticClass:"liveTitle"},[e._v(e._s(e.live.liveTitle))])],1),e.tablock?i("van-tabs",{staticClass:"van-tabs-block",model:{value:e.aselected,callback:function(t){e.aselected=t},expression:"aselected"}},e._l(e.roomClassifyList,(function(t,s){return i("van-tab",{key:s,staticClass:"fixed-tab",attrs:{title:t.name,name:t.id},nativeOn:{click:function(i){1==t.type&&e.toLink(t.url)}}},["number"!=typeof t.id&&isNaN(t.id)||2<t.id?i("div",{staticClass:"liveroom-tab-container"},[i("div",{staticClass:"comment comment-zi"},[i("p",{domProps:{innerHTML:e._s(t.introduce)}})])]):0==t.id?i("div",{ref:"textLiveListt",refInFor:!0,staticClass:"liveroom-tab-container"},e._l(e.message.textLiveList,(function(t,s){return i("div",{key:s,staticClass:"comment"},["notice"!=t.type&&"repeal"!=t.type?i("p",{staticClass:"username"},[e._v(e._s(t.self?"你":t.nickname)+":")]):e._e(),i("p",{class:{notice:"notice"==t.type,repeal:"repeal"==t.type}},["notice"==t.type?i("span",[e._v("系统提示：")]):e._e(),"image"!=t.type&&"timage"!=t.type?i("span",{staticClass:"commentText",domProps:{innerHTML:e._s(t.text)}}):"image"==t.type||"timage"==t.type?i("span",{staticClass:"commentImg"},[i("van-image",{staticClass:"commentImg",attrs:{"lazy-load":"",src:t.text},on:{click:function(i){return e.handleImgsClick(t.text)},load:function(t){return e.commentImgLoaded(this)}},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1):e._e()])])})),0):1==t.id?i("div",{ref:"commentListt",refInFor:!0,staticClass:"liveroom-tab-container"},e._l(e.message.commentList,(function(t,s){return i("div",{key:s,staticClass:"comment"},["notice"!=t.type&&"repeal"!=t.type?i("p",{staticClass:"username"},[e._v(e._s(t.self?"你":t.nickname)+":")]):e._e(),i("p",{class:{notice:"notice"==t.type,repeal:"repeal"==t.type}},["notice"==t.type?i("span",[e._v("系统提示：")]):e._e(),"image"!=t.type?i("span",{staticClass:"commentText",domProps:{innerHTML:e._s(t.text)}}):"image"==t.type?i("span",{staticClass:"commentImg"},[i("van-image",{staticClass:"commentImg",attrs:{"lazy-load":"",src:t.text},on:{click:function(i){return e.handleImgsClick(t.text)}},scopedSlots:e._u([{key:"loading",fn:function(){return[i("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1):e._e()])])})),0):2==t.id?i("div",{staticClass:"liveroom-tab-container"},[i("div",{staticClass:"comment"},[i("van-cell-group",{attrs:{border:!1,size:"large"}},[i("p",{staticClass:"introducesub"},[i("span",[e._v("直播间：")]),i("span",[e._v(e._s(e.live.liveTitle))])])]),i("div",{staticClass:"van-hairline--top",staticStyle:{height:"1px"}}),i("van-cell-group",{attrs:{border:!1,size:"large"}},[i("p",{staticClass:"introducesub"},[i("span",[e._v("直播时间：")]),i("span",[e._v(e._s(e.liveStartTime))])])])],1),e.live.introduce?i("van-panel",{attrs:{title:"直播间介绍"}},[i("div",{staticStyle:{"font-size":".4rem"},attrs:{slot:"footer"},slot:"footer"},[i("p",{domProps:{innerHTML:e._s(e.live.introduce)}})])]):e._e()],1):e._e()])})),1):e._e(),i("LiveRoomBottom",{attrs:{socketLoading:e.wsloading,wsConnected:e.modal.wsConnected}})],1)}),[function(){var e=this.$createElement;return(this._self._c||e)("ali-player",{ref:"VueAliplayerV2",staticClass:"aliPlayer",attrs:{options:this.aliplayerOptions}})}],!1,null,null,null).exports,meta:{title:"直播间"}}]}]);t.a=c},c5a4:function(e,t,i){},cf77:function(e,t,i){"use strict";var s=i("0078"),n=i.n(s),a={props:["socketLoading","wsConnected"],name:"LiveRoomBottom",data:function(){return{commentValue:""}},computed:{commentPlaceholder:function(){return this.wsConnected?"跟大家说点什么吧":this.wsConnected||this.socketLoading?!this.wsConnected&&this.socketLoading?(this.commentValue="","连接中..."):void 0:(this.commentValue="","连接断开")},isQlgh:function(){return!(this.$store.state.qlghUser&&(!this.$store.state.qlghUser.userPhone||-1==this.$store.state.qlghUser.userId))}},methods:{sendMessage:function(){if(-1==this.$parent.modal.qlghuser.userPhone||-1==this.$parent.modal.qlghuser.userId)return n.a.openLogin(),!1;if(!this.$parent.modal.wsConfig.uid&&!this.$parent.modal.qlghuser.userPhone)return this.$toast("游客不能发言"),!1;if(this.commentValue){var e=this.$parent.wsSend("text",{toUser:"all",text:this.commentValue});e&&(this.commentValue="")}else this.$toast("内容不能为空")},connectSocket:function(){3==this.$parent.wsClient.readyState&&this.$parent.connectWs()}}},r=(i("9d3a"),i("623f")),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"liveRoomBottom"},[i("van-field",{staticClass:"liveRoomBottomField",attrs:{center:"",clearable:"",readonly:0==e.wsConnected,placeholder:e.commentPlaceholder},model:{value:e.commentValue,callback:function(t){e.commentValue=t},expression:"commentValue"}},[e.wsConnected?i("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:function(t){return e.sendMessage()}},slot:"button"},[e._v("发送")]):i("van-button",{attrs:{slot:"button",size:"small",loading:e.socketLoading,type:"primary"},on:{click:function(t){return e.connectSocket()}},slot:"button"},[e._v("点我重连")])],1)],1)}),[],!1,null,null,null);t.a=o.exports},dbdd:function(e,t,i){}});